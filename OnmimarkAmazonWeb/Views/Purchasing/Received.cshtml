@model MvcPaging.IPagedList<OmnimarkAmazon.Models.ReceivedProduct>

<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />

<script src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script src="@Html.GetAppPath()/Scripts/Common.js" type="text/javascript"></script>
<script src="@Html.GetAppPath()/Scripts/ProductFiltering.js" type="text/javascript"></script>

@if (Request.QueryString["errmsg"] != null)
{
    <div class="errorbox">@Request.QueryString["errmsg"]</div>
}

<h2 style="float:left;">Received Products</h2>

<p style="float:left; padding-left:20px; margin-top:19px;">
    @Html.ActionLink("Receive New Shipment", "CreateReceivedShipment")
</p>

<div class="pager" style="float:left; padding-left:20px; margin-top:15px;">
	@Html.Pager(Model.PageSize, Model.PageNumber, Model.TotalItemCount, Model.SortBy, Model.SortDescending)
</div>


<div style="float:left; padding-left:20px; margin-top:15px;">
	Filter by Product: <input name="FilterProductSearch" id="FilterProductSearch" style="width:200px;" value="@Request["ProductFilter"]" />
</div>

<div style="clear:both;"></div>

<table>
    <tr>
        <th>
            Date
        </th>
        <th>
            Number
        </th>
        <th>
            Product
        </th>
        <th>
           Status
        </th>
        <th>
            Qty
        </th>
        <th>
            Tracking Number
        </th>
        <th>
            Vendor
        </th>
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td align="center">
            @(((DateTime)item.ReceivedShipment.Date).ToString("M/d/yyyy"))
        </td>
        <td align="left">
            @item.Number
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Product.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.RecievedShipmentStatus.Name)
        </td>
        <td align="right">
            @(((decimal)item.Qty).ToString("###,###,##0"))
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.TrackingNumber)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.ReceivedShipment.Vendor.Name)
        </td>
        <td valign="top">
            @Html.ActionLink("Edit", "EditReceivedShipment", new { id=item.ReceivedShipmentID }) |
            @Html.ActionLink("Details", "ViewReceivedShipment", new { id = item.ReceivedShipmentID }) |
            @Html.ActionLink("Delete", "DeleteReceivedShipment", new { id = item.ReceivedShipmentID })
        </td>
    </tr>
}

</table>
