<link href="@Html.GetAppPath()/Content/jquery.tooltip.css" rel="stylesheet" type="text/css" />

<script src="@Html.GetAppPath()/Scripts/Reports.js" type="text/javascript"></script>
<script src="@Html.GetAppPath()/Scripts/jquery.tooltip.js" type="text/javascript"></script>


<script type="text/javascript">
    function reportLoaded(data) {
        $("#StartDate").val(data.StartDate)
        $("#EndDate").val(data.EndDate);

        $(".qty").tooltip({
            relative: true,
            bodyHandler: function () {
                var _this = $(this);

                var tiphtml = "<h3>Qty by Store</h3>";
                tiphtml += "<table><tr><th>Store</th><th>Qty</th></tr>";
                tiphtml += "<tr><td align='left'>Brandzilla</td><td align='right'>" + _this.attr("bz") + "</td></tr>";
                tiphtml += "<tr><td align='left'>Five Star</td><td align='right'>" + _this.attr("fs") + "</td></tr>";
                tiphtml += "<tr><td align='left'>Vitality Place</td><td align='right'>" + _this.attr("vp") + "</td></tr>";
                tiphtml += "</table>";

                var tip = $("<div />").html(tiphtml);

                return tip;
            },
            showURL: false
        });

        $(".sales").tooltip({
            relative: true,
            bodyHandler: function () {
                var _this = $(this);

                var tiphtml = "<h3>Sales by Store</h3>";
                tiphtml += "<table><tr><th>Store</th><th>Qty</th></tr>";
                tiphtml += "<tr><td align='left'>Brandzilla</td><td align='right'>" + _this.attr("bz") + "</td></tr>";
                tiphtml += "<tr><td align='left'>Five Star</td><td align='right'>" + _this.attr("fs") + "</td></tr>";
                tiphtml += "<tr><td align='left'>Vitality Place</td><td align='right'>" + _this.attr("vp") + "</td></tr>";
                tiphtml += "</table>";

                var tip = $("<div />").html(tiphtml);

                return tip;
            },
            showURL: false
        });
    }

    function StartEndDateChangedSuccess() {
        loadReport("@Html.GetAction()Report?StartDate=" + encodeURIComponent($("#StartDate").val()) + "&EndDate=" + encodeURIComponent($("#EndDate").val()));
    }

    $(function () {
        loadReport("@Html.GetAction()Report");

        $("#StartDate").datepicker({
            onSelect: StartEndDateChanged
        });
        $("#EndDate").datepicker({
            onSelect: StartEndDateChanged
        });

    });

</script>

<h2 id="pageTitle" style="float:left;">@ViewBag.Title</h2>

<div id="containerDays" style="float:left; margin-top:17px; margin-left:20px;">
    Start: <input name="StartDate" id="StartDate" size="7" />
    End: <input name="EndDate" id="EndDate" size="7" />
</div>

<div style="clear:both;"></div>

<div id="divReport" style="overflow:scroll;"></div>
